<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Recherche</title>

        <!-- Bootstrap + CSS + JQuery + JS -->
        <link rel="stylesheet" href="bootstrap/bootstrap-3.3.7/bootstrap-3.3.7-dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="css/recherche.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="bootstrap/bootstrap-3.3.7/bootstrap-3.3.7-dist/js/bootstrap.js"></script>

        <!-- Bootstrap Select + JS Select -->
        <link rel="stylesheet" href="bootstrap/bootstrap-select-1.12.2/dist/css/bootstrap-select.min.css">
        <script src="bootstrap/bootstrap-select-1.12.2/dist/js/bootstrap-select.min.js"></script>


    </head>

    <body>

    <script>

        //Fonction recherche
        function search(){
                var word = document.getElementById('inputSearch').value;
                //console.log(word);

            }



            function drawTab(){

                $.getJSON("donnees.json", function(data){
                    var tableau = '<div class="col-xs-offset-1 col-xs-10" id="tabMedia">' +
                                    '<table class="table table-hover"><thead class="theadSearch">' +
                                    '<tr><th>Type</th><th>Titre</th><th>Auteur</th><th>Emprunté par</th>'+
                                    '<th>Retour prévu</th></tr></thead><tbody>';
                    var i = 1;
                    $.each(data, function(x, val){
                        //console.log(val);
                        for(var m in val){
                           //console.log(val[m].titre);
                            tableau += '<tr class="rowTab'+i+'" onmouseover="$(this).css(\'cursor\', \'pointer\');"><td><span class="glyphicon glyphicon-';
                            if(val[m].type == "livre")
                                tableau += "book";
                            else if(val[m].type == "cd")
                                tableau += "music";
                            else
                                tableau += "film";
                            tableau += '"></span></td>';

                            <!-- Ajout td json-->
                            tableau += '<td>' + val[m].titre + '</td><td>'+val[m].auteur+'</td><td>'+val[m].emprunte+'</td><td>'+val[m].date+'</td></tr>';
                            tableau += '<tr class="trHidden' + i + '"><td colspan="5"><div class="divHidden'+i+'">';

                            <!-- Ajout du détail-->
                            tableau += '<img src="http://www.dta-ingenierie.fr/img/logoDTA2.png" alt="DTA logo" height="150" width="150">';
                            tableau += '<p>Test d\'affichage de la div hidden lors de l\'appuie d\'un td sur le tableau !</p>';
                            tableau += '</div></td></tr>';


                            i++;
                        }

                        tableau += '</tbody></table></div>';
                       // console.log(tableau);
                        $('#tabMedia').html(tableau);
                    });
                });

            }



        function getval(sel){
            var index = document.getElementById("sel").selectedIndex;
            var options = document.getElementById("sel").options;
            if(options[index].text == "Médias"){
                $("#radioAdhe").hide();
                $("#checkMedia").fadeIn();
                $("#tabAdherent").hide();
                $("#tabMedia").fadeIn();


            }else{
                console.log("adherent");
                $("#checkMedia").hide();
                $("#radioAdhe").fadeIn();
                $("#tabAdherent").fadeIn();
                $("#tabMedia").hide();
            }
        }



        $(document).ready(function () {
            getval(sel);
            $("#radioAdhe").hide();
            $("#tabAdherent").hide();
            $(".rowHidden").hide();


            $('.rowTab').click(function(){
                //console.log("test");
                if($(".divHidden").is(":hidden")){
                    $(".trHidden").fadeIn("slow")
                    $( ".divHidden" ).slideDown("slow");
                }else{
                    $(".trHidden").hide("fast")
                    $(".divHidden").slideUp("fast");
                }

            });
            drawTab();

            console.log($('tr').hasClass('rowTab1'));



        });




    </script>

    <div class="container">
        <div class="row">



            <div class="col-xs-12 col-xs-offset-1">
                <div class="input-group">
                    <div class="input-group-btn search-panel">
                            <select class="selectpicker show-tick" id="sel" onchange="getval(this);" data-width="fit" data-style="btn-primary">
                                <option value="medias">Médias</option>
                                <option value="adherents">Adhérents</option>
                            </select>
                    </div>


                    <input type="text" class="form-control" id="inputSearch" placeholder="Titre, auteur, adhérent...">


                    <span class="input-group-btn d-inline">
                        <button class="btn btn-default" type="button" onclick="search()">
                            <span class="glyphicon glyphicon-search"></span>
                        </button>
                    </span>

                    <div class="col-xs-2">
                        <a href="#" class="btn btn-md btn-primary" >
                            <span class="glyphicon glyphicon-plus"></span>
                            <span class="glyphicon glyphicon-user"></span>
                        </a>
                    </div>

                </div>
            </div>





        </div>

        <div class="col-xs-offset-3 col-xs-12" id="checkMedia">
            <div class="col-xs-2">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" value="">
                        <span class="cr"></span>
                        Livre
                    </label>
                </div>
            </div>

            <div class="col-xs-2">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" value="">
                        <span class="cr"></span>
                        CD
                    </label>
                </div>
            </div>

            <div class="col-xs-2">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" value="">
                        <span class="cr"></span>
                        DVD
                    </label>
                </div>
            </div>
        </div>

        <div class="col-xs-offset-3 col-xs-12" id="radioAdhe">
            <div class="col-xs-3">
                <div class="radio">
                    <label>
                        <input type="radio" name="o3" value="" checked>
                        <span class="cr"><i class="cr-icon fa fa-circle"></i></span>
                        Par nom
                    </label>
                </div>
            </div>

            <div class="col-xs-3">
                <div class="radio">
                    <label>
                        <input type="radio" name="o3" value="">
                        <span class="cr"><i class="cr-icon fa fa-circle"></i></span>
                        Par identifiant
                    </label>
                </div>
            </div>


        </div>

    </div><br><br>


        <div class="col-xs-offset-1 col-xs-10" id="tabMedia">
        </div>


        <div class="col-xs-offset-1 col-xs-10" id="tabAdherent">
            <table class="table table-hover">
                <thead id="theadSearch">
                <tr>
                    <th>Identifiant</th>
                    <th>Nom Prénom</th>
                    <th>Date de naissance</th>
                    <th>A jour de cotisation ?</th>
                    <th>Nombre médias</th>
                </tr>
                </thead>
                <tbody>
                <tr class="rowTab1">
                    <td>
                        <span class="glyphicon glyphicon-user"></span>
                        <strong>&nbsp;&nbsp;austinB45</strong>
                    </td>
                    <td>Bastien Austin</td>
                    <td>15/11/1987</td>
                    <td>Oui</td>
                    <td>13 médias</td>
                </tr>
                <tr>
                    <td>
                        <span class="glyphicon glyphicon-user"></span>
                        <strong>&nbsp;&nbsp;julienH12</strong>
                    </td>
                    <td>Haudi Julien</td>
                    <td>01/10/1980</td>
                    <td>Non</td>
                    <td>9 médias</td>
                </tr>
                <tr>
                    <td>
                        <span class="glyphicon glyphicon-user"></span>
                        <strong>&nbsp;&nbsp;hedyE</strong>
                    </td>
                    <td>El-Filali Hedy</td>
                    <td>11/05/1979</td>
                    <td>Oui</td>
                    <td>1 médias</td>
                </tr>
                <tr>
                    <td>
                        <span class="glyphicon glyphicon-user"></span>
                        <strong>&nbsp;&nbsp;laurentS79</strong>
                    </td>
                    <td>Sion Laurent</td>
                    <td>15/02/1995</td>
                    <td>Non</td>
                    <td>0 médias</td>
                </tr>
                <tr>
                    <td>
                        <span class="glyphicon glyphicon-user"></span>
                        <strong>&nbsp;&nbsp;husrefB69</strong>
                    </td>
                    <td>Baltic Husref</td>
                    <td>11/05/1991</td>
                    <td>Non</td>
                    <td>5 médias</td>
                </tr>

                </tbody>
            </table>
        </div>

        </div>



    </body>

</html>